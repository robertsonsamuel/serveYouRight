{"version":3,"sources":["webpack:///webpack/bootstrap 993fc8e8d81c24bb7737","webpack:///./public/js/angularApp.js","webpack:///./public/js/controllers/loginCtrl.js","webpack:///./public/js/controllers/menuCtrl.js","webpack:///./public/js/controllers/registerCtrl.js","webpack:///./public/js/controllers/welcomeCtrl.js","webpack:///./public/js/services/loginSrv.js","webpack:///./public/js/services/registerSrv.js","webpack:///./public/js/services/tokenSvc.js","webpack:///./public/js/services/AuthService.js","webpack:///./public/js/services/getSvc.js","webpack:///./public/js/services/createSvc.js","webpack:///./public/js/services/editSvc.js","webpack:///./public/js/services/deleteSvc.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;;;AAGL,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC;;;;;;;;;;AC7CD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,gCAA+B,iBAAiB;AAChD;AACA;AACA,QAAO;AACP;AACA,EAAC;;;;;;;;;;ACzBD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP,MAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH;AACA;AACA,EAAC;;;;;;;;;;ACjGD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA6B,oBAAoB,GAAG,mBAAmB;AACvE;AACA,MAAK;AACL,gCAA+B,SAAS;AACxC;AACA,MAAK;AACL;AACA,EAAC;;;;;;;;;;AChBD;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,uBAAsB;AACtB;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;;AAET;AACA,QAAO,MAAM;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL,IAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;;;ACpHD;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;;;ACZD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;;;ACRD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;;;ACdD;;AAEA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA,EAAC;;;;;;;;;;ACdD;;AAEA;;;AAGA;AACA;AACA,8CAA6C,OAAO;AACpD;AACA;AACA,uCAAsC,OAAO;AAC7C;AACA,EAAC;;;;;;;;;;ACZD;;AAEA;;AAEA;AACA;AACA,wCAAuC,SAAS,IAAI,uCAAuC;AAC3F;AACA;AACA,6CAA4C,OAAO;AACnD;AACA,EAAC;;;;;;;;;;ACXD;;AAEA;;;AAGA;AACA;AACA,0CAAyC,OAAO,GAAG,OAAO;AAC1D;AACA;AACA,gDAA+C,aAAa,GAAG,QAAQ;AACvE;AACA,EAAC;;;;;;;;;;ACZD;AACA;;AAEA;AACA;AACA,wCAAuC,QAAQ,GAAG,OAAO;AACzD;AACA;AACA,6CAA4C,OAAO,GAAG,OAAO;AAC7D;AACA;AACA,mDAAkD,WAAW,GAAG,QAAQ;AACxE;AACA,EAAC","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 993fc8e8d81c24bb7737\n **/","/* global swal */\n/* global angular */\n'use strict';\nlet app = angular.module('MainApp', ['ui.router']);\n\napp.config(function($stateProvider, $urlRouterProvider) {\n  $urlRouterProvider.otherwise(\"login\");\n\n  $stateProvider\n    .state('login', {\n      url: \"/login\",\n      templateUrl: \"../partials/loginMember.html\",\n      controller: \"loginCtrl\",\n      authenticate: false\n    })\n    .state('resident', {\n      url: \"/register\",\n      templateUrl: \"../partials/registerMember.html\",\n      controller: \"registerCtrl\",\n      authenticate: false\n    })\n    .state('welcome', {\n      url: \"/welcome\",\n      templateUrl: \"../partials/welcomePage.html\",\n      controller: \"welcomeCtrl\",\n      authenticate: true\n    })\n    .state('menu', {\n      url: \"/menu\",\n      templateUrl: \"../partials/menuPage.html\",\n      controller: \"menuCtrl\",\n      authenticate: true\n    })\n\n\n})\n\napp.run(function ($rootScope, $state, AuthService) {\n  $rootScope.$on(\"$stateChangeStart\", function(event, toState, toParams, fromState, fromParams){\n    if (toState.authenticate && !AuthService.isAuthenticated()){\n      // User isnâ€™t authenticated\n      $state.transitionTo(\"login\");\n      event.preventDefault();\n    }\n  });\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/angularApp.js\n ** module id = 1\n ** module chunks = 0\n **/","'use strict'\nlet app = angular.module('MainApp');\n// Login Ctrl\napp.controller('loginCtrl',function ($rootScope,$scope, loginSrv, tokenSvc, $state) {\n  $scope.login = function (loginData) {\n    loginSrv.loginUser(loginData).then(function (resp) {\n      console.log(resp);\n      if (resp.data.user.owner || resp.data.owner){\n        tokenSvc.setToken(resp.data.token);\n        loginSrv.setUser(JSON.stringify(resp.data.user));\n        $rootScope.loggedIn = true;\n        $state.go('welcome')\n      }else{\n        $state.go('login')\n        $rootScope.loggedIn = false;\n        tokenSvc.removeToken();\n        tokenSvc.logOutUser();\n        swal(\"Authentication Err\", 'You are not authorized to view this page', 'error');\n      }\n    },function (err) {\n      if(err) swal(\"Error\", `${err.data.message}`, \"warning\")\n      tokenSvc.removeToken();\n      console.log(err);\n      })\n  }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/controllers/loginCtrl.js\n ** module id = 2\n ** module chunks = 0\n **/","'use strict';\n\nlet app = angular.module('MainApp');\n\napp.controller('menuCtrl', function($rootScope, $scope, $state, tokenSvc, getSvc, createSvc, editSvc, deleteSvc) {\n  if ($rootScope.editingMenu) {\n    $rootScope.loggedIn = true;\n    getSvc.getMenuInfo($rootScope.editingMenu)\n      .then(function(resp) {\n        $scope.menu = resp.data;\n      }, function(err) {\n        console.log(err);\n      })\n\n    $scope.createItem = function() {\n      let menuId = $rootScope.editingMenu;\n      let item = {\n        itemName:$scope.newItemName,\n        itemDescription:$scope.newItemDesc,\n        itemPrice:$scope.newItemPrice\n      };\n      createSvc.addItem(menuId, item)\n      .then(function (resp) {\n        $scope.menu = resp.data\n        $scope.newItemName = '';\n        $scope.newItemDesc = '';\n        $scope.newItemPrice = '';\n        $('#createModal').modal('hide')\n      },function (err) {\n        swal(\"Error!\", \"There was an error adding an item to the menu.\", \"error\");\n      })\n    }\n\n    $scope.addItemModal = function () {\n      $('#createModal').modal('show')\n    }\n    $scope.editItem = function (itemId, itemName, itemDescription, itemPrice) {\n      $scope.editItemId = itemId;\n      $scope.editItemName = itemName;\n      $scope.editItemDesc = itemDescription;\n      $scope.editItemPrice = itemPrice;\n\n      $('#editItemModal').modal('show')\n    }\n\n    $scope.saveItemChanges = function () {\n      let item = {\n          itemName:$scope.editItemName,\n          itemDescription:$scope.editItemDesc,\n          itemPrice:$scope.editItemPrice\n      };\n      editSvc.editItem($rootScope.editingMenu, $scope.editItemId, item)\n      .then(function (resp) {\n        $scope.menu = resp.data;\n        $scope.editItemId = '';\n        $scope.editItemName ='';\n        $scope.editItemDesc ='';\n        $scope.editItemPrice ='';\n        $('#editItemModal').modal('hide');\n\n      },function (err) {\n        console.log(err);\n      })\n    }\n\n    $scope.deleteItem = function (itemId) {\n      swal({\n      title: \"Are you sure?\",\n      text: \"You will not be able to recover this item!\",\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#DD6B55\",\n      confirmButtonText: \"Yes, delete it!\",\n      closeOnConfirm: false\n    },\n    function() {\n      deleteSvc.deleteItem($rootScope.editingMenu, itemId)\n      .then(function (resp) {\n        $scope.menu = resp.data\n        swal(\"Deleted!\", \"Your menu has been deleted.\", \"success\");\n      },function (err) {\n        swal(\"Error!\", \"There was an error deleting the item.\", \"error\");\n      })\n    })\n    }\n\n\n    $scope.logout = function() {\n      $state.go('login')\n      $rootScope.loggedIn = false;\n      tokenSvc.removeToken();\n      tokenSvc.logOutUser();\n    }\n\n  } else {\n    $state.go('welcome');\n  }\n})\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/controllers/menuCtrl.js\n ** module id = 3\n ** module chunks = 0\n **/","'use strict';\n\nvar app = angular.module('MainApp');\n\n// Register Ctrl\napp.controller('registerCtrl',function ($scope, registerSrv, $state ) {\n  $scope.register = function (regData) {\n    registerSrv.registerUser(regData).then(function (resp) {\n      console.log(resp);\n      swal(`Awesome: Hello ${resp.data.firstName} ${resp.data.lastName}`, `You have been registered!`, \"success\");\n      $state.go('login')\n    }, function (err) {\n      if(err) swal(\"Error\", `${err.data}`, \"warning\")\n      console.log(err);\n    })\n  }\n})\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/controllers/registerCtrl.js\n ** module id = 4\n ** module chunks = 0\n **/","'use strict';\n\nlet app = angular.module('MainApp');\n\n// WelcomePage Ctrl\napp.controller('welcomeCtrl', function($rootScope, $scope, registerSrv, loginSrv, $state, tokenSvc, getSvc, createSvc, editSvc, deleteSvc) {\n  if (typeof localStorage.getItem('token') === 'undefined') {\n    $state.go('login')\n  } else if (localStorage.getItem('token') === null) {\n    $state.go('login')\n  } else {\n    let user = JSON.parse(localStorage.getItem('user'));\n      if (user.owner){  //is an owner\n        getSvc.getOwnerInfo(user._id)\n        .then(function (resp) {\n          $scope.user = resp.data;\n        },function (err) {\n          console.log(err);\n        })\n\n        $rootScope.loggedIn = true;\n      }else { //is an employee\n        $scope.logout();\n        swal(\"Authentication Err\", 'You are not authorized to view this page', 'error');\n      }\n    }\n\n  $scope.createMenu = function () {\n    createSvc.makeMenu($scope.newMenu, $scope.user, $scope.user.storeCode)\n    .then(function (resp) {\n      $scope.user.menus = [];\n      $scope.user.menus = resp.data.menus;\n      $scope.newMenu = '';\n    }, function (err) {\n        swal(\"Error!\", \"There was an creating the menu.\", \"error\");\n    })\n  }\n\n  $scope.deleteMenu = function (menuId) {\n    swal({\n    title: \"Are you sure?\",\n    text: \"You will not be able to recover this menu!\",\n    type: \"warning\",\n    showCancelButton: true,\n    confirmButtonColor: \"#DD6B55\",\n    confirmButtonText: \"Yes, delete it!\",\n    closeOnConfirm: false\n  },\n  function() {\n    deleteSvc.deleteMenu(menuId, $scope.user._id)\n      .then(function(resp) {\n        console.log('resp from delete', resp);\n        $scope.user.menus = [];\n        $scope.user.menus = resp.data.menus;\n        swal(\"Deleted!\", \"Your menu has been deleted.\", \"success\");\n      }, function(err) {\n        swal(\"Error!\", \"There was an error deleting the menu.\", \"error\");\n      })\n  });\n}\n\n  $scope.editMenu = function (menuID) {\n    $rootScope.editingMenu = menuID\n    $state.go('menu')\n  }\n  $scope.launchHelpModal = function () {\n    $('#helpModal').modal('show')\n  }\n\n  $scope.launchEditEmployeeModal = function (employee) {\n    $scope.member = employee;\n    $scope.member._id = employee._id;\n    $('#editEmployeeModal').modal('show')\n  }\n  $scope.editEmployee = function (employee) {\n    delete employee.menus\n    delete employee.$$hashKey\n    delete employee.orders\n    console.log('before sending', employee);\n    editSvc.editEmployee(employee, $scope.user._id).then(function (resp) {\n      $scope.user = resp.data;\n      $('#editEmployeeModal').modal('hide')\n    }, function (err) {\n      swal('Error', 'Error updating this employee.', 'error');\n    })\n\n  }\n\n  $scope.deleteEmployee = function (employee) {\n    swal({\n    title: \"Are you sure?\",\n    text: \"You will not be able to recover this user!\",\n    type: \"warning\",\n    showCancelButton: true,\n    confirmButtonColor: \"#DD6B55\",\n    confirmButtonText: \"Yes, delete it!\",\n    closeOnConfirm: false\n  },\n  function() {\n    deleteSvc.deleteEmployee(employee._id, $scope.user._id)\n    .then(function (resp) {\n      $scope.user = resp.data\n      swal(\"Deleted!\", \"Your user has been deleted.\", \"success\");\n    },function (err) {\n      swal('Error', 'Error deleting this employee.', 'error');\n    })\n  })\n\n  }\n\n  $scope.logout = function() {\n    $state.go('login')\n    $rootScope.loggedIn = false;\n    tokenSvc.removeToken();\n    tokenSvc.logOutUser();\n  }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/controllers/welcomeCtrl.js\n ** module id = 5\n ** module chunks = 0\n **/","'use strict';\n\nlet app = angular.module('MainApp');\n\n\napp.service('loginSrv', function ($http) {\n  this.loginUser = function (loginData) {\n    return $http.post('/members/login',loginData)\n  }\n  this.setUser = function (user) {\n    localStorage.setItem('user', user)\n  }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/services/loginSrv.js\n ** module id = 6\n ** module chunks = 0\n **/","'use strict';\nlet app = angular.module('MainApp');\n\napp.service('registerSrv',function ($http) {\n  this.registerUser = function (userData) {\n    console.log('before post', userData);\n    return $http.post('/members/register',userData)\n  }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/services/registerSrv.js\n ** module id = 7\n ** module chunks = 0\n **/","'use strict';\n\nlet app = angular.module('MainApp');\n\napp.service('tokenSvc',function () {\n  this.setToken = function (token) {\n     localStorage.setItem('token', token);\n  }\n  this.removeToken = function (token) {\n     localStorage.removeItem('token');\n  }\n  this.logOutUser = function () {\n      localStorage.removeItem('user');\n  }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/services/tokenSvc.js\n ** module id = 8\n ** module chunks = 0\n **/","'use strict';\n\nlet app = angular.module('MainApp');\n\napp.service('AuthService',function ($http) {\n  this.isAuthenticated = function (params) {\n      if(typeof localStorage.token === 'undefined'){\n        return false;\n      }else if(localStorage.token == null){\n          return false;\n      }else{\n          return true;\n      }\n  }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/services/AuthService.js\n ** module id = 9\n ** module chunks = 0\n **/","'use strict';\n\nlet app = angular.module('MainApp');\n\n\napp.service('getSvc', function ($http) {\n    this.getOwnerInfo = function (userId) {\n      return $http.get(`/members/ownerInfo/${userId}`)\n    }\n    this.getMenuInfo = function (menuId) {\n      return $http.get(`/menus/menu/${menuId}`)\n    }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/services/getSvc.js\n ** module id = 10\n ** module chunks = 0\n **/","'use strict';\n\nlet app = angular.module('MainApp');\n\napp.service('createSvc', function ($http) {\n  this.makeMenu = function (menuName, user, storeCode) {\n    return $http.post(`/menus/create/${user._id}`, {storeCode:storeCode, menuName:menuName} )\n  }\n  this.addItem = function(menuId, itemInfo){\n    return $http.post(`/menus/create/item/${menuId}`, itemInfo)\n  }\n})\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/services/createSvc.js\n ** module id = 11\n ** module chunks = 0\n **/","'use strict';\n\nlet app = angular.module('MainApp');\n\n\napp.service('editSvc', function ($http) {\n  this.editItem = function (menuId, itemId, item) {\n    return $http.put(`/menus/edit/item/${menuId}/${itemId}`, item);\n  }\n  this.editEmployee = function (employee, ownerId) {\n    return $http.put(`/members/edit/employee/${employee._id}/${ownerId}`, employee)\n  }\n})\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/services/editSvc.js\n ** module id = 12\n ** module chunks = 0\n **/","'use strict';\nlet app = angular.module('MainApp');\n\napp.service('deleteSvc',function ($http) {\n  this.deleteMenu = function (menuId, ownerId) {\n    return $http.post(`/menus/delete/${ownerId}/${menuId}`)\n  }\n  this.deleteItem = function (menuId, itemId) {\n    return $http.post(`/menus/delete/item/${menuId}/${itemId}`)\n  }\n  this.deleteEmployee = function (employeeId, ownerId) {\n    return $http.post(`/members/delete/employee/${employeeId}/${ownerId}`)\n  }\n})\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/services/deleteSvc.js\n ** module id = 13\n ** module chunks = 0\n **/"],"sourceRoot":""}